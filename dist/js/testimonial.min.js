/**
  * testimonial - JS testimonial slider with AJAX
  * @version v1.0.4
  * @link http://alekseyleshko.github.io/testimonial.js/
  * @license MIT (https://github.com/AlekseyLeshko/testimonial.js/blob/master/LICENSE)
*/
"use strict";var Parser=function(t){this.$nodeList=t,this.dataList=[]};Parser.prototype={parse:function(){for(var t=0;t<this.$nodeList.length;t++){var i=$(this.$nodeList[t]),e=this.parseNode(i);this.dataList.push(e)}return this.dataList},parseNode:function(t){var i={},e=t.children(".author");i.author=this.parseAuthorNode(e);var n=t.children(".company");return i.company=this.parseCompanyNode(n),i.quote=t.children(".quote").text().trim(),i},parseAuthorNode:function(t){var i=t.children("a"),e=i.text().trim(),n=this.getAttrHrefOrDefault(i),s=t.children(".avatar").attr("src"),a={name:e,url:n,avatar:s};return a},parseCompanyNode:function(t){var i=t.children("a"),e=i.text().trim(),n=this.getAttrHrefOrDefault(i),s={name:e,url:n};return s},getAttrHrefOrDefault:function(t){var i=t.attr("href");return void 0===i&&(i="#"),i}};var Testimonial=function(t,i){this.$container=t,this.initPlugin(i)};Testimonial.prototype={start:function(){var t=this;this.timerId=setInterval(function(){t.next()},this.pluginOptions.timeout)},stop:function(){clearInterval(this.timerId),this.timerId=void 0},next:function(){void 0!==this.timerId&&this.stop(),this.cleanSlideList();var t=this.$slideList[this.currentSlideIndex];this.indexing();var i=this.$slideList[this.currentSlideIndex];t.animateHide(),i.animateShow(),this.resizePluginContainer(),this.currentSlideIndex<=this.pluginOptions.slideCount-1&&this.loadSlide(),this.start()},add:function(t){this.createAndAddSlide(t);var i=this.$slideList[this.$slideList.length-1];this.slideRendering(i,!1)},loadSlide:function(){if(this.getSlide&&"function"==typeof this.getSlide){var t=this.getSlide();return void this.add(t)}},cleanSlideList:function(){if(this.whetherToRemoveSlide()){var t=1;0!==this.currentSlideIndex&&(t=0,this.currentSlideIndex--),this.removeSlide(t)}},whetherToRemoveSlide:function(){var t=this.$slideList.length>this.pluginOptions.slideCount;return t},removeSlide:function(t){this.$slideList[t].remove();var i=this.$slideList.splice(t,1);delete i[0]},getSlideCount:function(){return this.pluginOptions.slideCount},setSlideCount:function(t){for(this.pluginOptions.slideCount=t;this.whetherToRemoveSlide()===!0;)this.cleanSlideList()},createOptions:function(t){var i=this.getDefaultOptions();this.pluginOptions=$.extend(i,t),this.pluginOptions.width<400&&(this.pluginOptions.width=400)},getDefaultOptions:function(){var t={height:175,width:700,slideCount:3,timeout:7e3,autostart:!0,indents:20,minWidth:400};return t},slideListRendering:function(){for(var t=0;t<this.$slideList.length;t++){var i=this.$slideList[t],e=t===this.currentSlideIndex;this.slideRendering(i,e)}},parseDomTree:function(){var t=this.$container.children();if(!(t.length<=0)){t.remove();var i=new Parser(t);this.dataList=i.parse()}},createSlides:function(){for(var t=0;t<this.dataList.length;t++){var i=this.dataList[t];this.createAndAddSlide(i)}},createAndAddSlide:function(t){var i={width:this.pluginOptions.width},e=new TestimonialSlide(t,i);this.$slideList.push(e)},bindEvents:function(){var t=this.$container.find(".next_slide"),i=this;t.click(function(){i.next()})},resizePluginContainer:function(){if(!(this.$slideList.length<=0)){var t=20,i=this.$slideList[this.currentSlideIndex].height();this.$container.height(i+t)}},indexing:function(){return 0===this.$slideList.length?void(this.currentSlideIndex=0):(this.currentSlideIndex++,void(this.currentSlideIndex===this.$slideList.length&&(this.currentSlideIndex=0)))},slideRendering:function(t,i){var e=this.$container.find(".main_container");t.renderTo(e),i||t.hideSlide()},configContainer:function(){this.$container.height(this.pluginOptions.height),this.$container.width(this.pluginOptions.width)},createTemplate:function(){this.template='<div class="main_container" style="width: {{width}}px;"></div><div class="next_slide"></div>'},renderTemplate:function(){var t=Handlebars.compile(this.template),i={width:2*this.pluginOptions.width+500},e=t(i);this.$container.html(e)},initSlideList:function(){this.parseDomTree(),this.configContainer(),this.createTemplate(),this.renderTemplate(),this.bindEvents(),this.createSlides(),this.slideListRendering(),this.resizePluginContainer()},initPlugin:function(t){this.$slideList=[],this.dataList=[],this.currentSlideIndex=0,this.getSlide=null,this.createOptions(t),this.initSlideList(),this.pluginOptions.autostart&&this.start()}};var TestimonialSlide=function(t,i){this.data=this.createData(t),this.createOptions(i),this.createSlide()};TestimonialSlide.prototype={createData:function(t){var i={author:{name:"",url:"",avatar:""},company:{name:"",url:""},quote:""},e=$.extend(i,t);return e},createOptions:function(t){var i=this.getDefaultOptions();this.options=$.extend({},i,t)},getDefaultOptions:function(){var t={width:700,duration:750,distance:250,cssClass:"testimonial_slide",indents:20};return t},setHeightForBlockDiv:function(){var t=this.$domNode.height();this.$domNode.find(".block").height(t)},createSlide:function(){this.createTemplate(),this.renderTemplate()},animateHide:function(){var t=this;this.$domNode.animate({"margin-left":"+="+this.options.distance+"px",opacity:"0"},this.options.duration,function(){t.hideSlide()})},animateShow:function(){this.$domNode.show().animate({"margin-left":"+="+this.options.distance+"px",opacity:"1"},2*this.options.duration)},hideSlide:function(){var t={display:"none",opacity:0,"margin-left":"-"+this.options.distance+"px"};this.$domNode.css(t)},height:function(){return this.$domNode.height()},remove:function(){this.$domNode.empty(),this.$domNode.remove()},createTemplate:function(){this.template='<div class="testimonial_slide" style="width: {{slide.width}}px;"><div class="content"><div class="main" style="width: {{main.width}}px;"><div class="quote"><div class="text"><div class="quotation_mark left"><img src="dist/img/quotation_mark.png"></div><p>{{slide.quote}}</p><div class="quotation_mark right"><img src="dist/img/quotation_mark_inverted.png"></div></div></div><div class="signature"><div class="author">&#x2015;<a target="_blank" href="{{slide.author.url}}">{{slide.author.name}}</a></div><div class="company"><a target="_blank" href="{{slide.company.url}}">{{slide.company.name}}</a></div></div></div><div class="avatar"><div class="block"><div class="author"><img src="{{slide.author.avatar}}"></div><div class="helper"></div></div></div></div></div>'},renderTemplate:function(){var t=Handlebars.compile(this.template),i=this.getDataForTemplate(),e=t(i);this.$domNode=$(e)},getDataForTemplate:function(){var t={main:{width:this.options.width-180}};return t.slide=this.data,t.slide.width=this.options.width-this.options.indents,t},renderTo:function(t){t.append(this.$domNode),this.setHeightForBlockDiv()}};