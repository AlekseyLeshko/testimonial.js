{"version":3,"sources":["parser.js","testimonial.js","testimonialSlide.js"],"names":[],"mappings":"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","file":"testimonial.min.map.js","sourcesContent":["Parser = function($nodeArr) {\n  this.$nodeArr = $nodeArr;\n  this.dataArr = [];\n};\n\nParser.prototype = {\n  parse: function() {\n    for (var i = 0; i < this.$nodeArr.length; i++) {\n      var $node = $(this.$nodeArr[i]);\n      this.parseNode($node);\n    }\n\n    return this.dataArr;\n  },\n\n  parseNode: function($node) {\n    var data = this.parseAuthorNode($node.children('.author'));\n    data.quote = $node.children('.quote').text().trim();\n    this.dataArr.push(data);\n  },\n\n  parseAuthorNode: function($authorNode) {\n    var $fullNameNode = $authorNode.children('.full_name');\n    var $companyNode = $authorNode.children('.company');\n    var slide = {\n      fullName: $fullNameNode.text().trim(),\n      authorHref: this.getAttrHrefOrDefault($fullNameNode.children('a')),\n      company: $companyNode.text().trim(),\n      companyHref: this.getAttrHrefOrDefault($companyNode.children('a')),\n      fotoSrc: $authorNode.children('.foto').attr('src')\n    };\n    return slide;\n  },\n\n  getAttrHrefOrDefault: function($node) {\n    var href = $node.attr('href');\n    if (href === undefined) {\n      href = '#';\n    }\n    return href;\n  },\n};\n","Testimonial = function($container, options) {\n  this.$container = $container;\n  this.pluginOptions = {};\n\n  this.$slides = [];\n  this.dataArr = [];\n  this.currentSlideIndex = 0;\n\n  this.initPlugin(options);\n};\n\nTestimonial.prototype = {\n  initPlugin: function(options) {\n    this.createOptions(options);\n    this.parseDomTree();\n    this.createSlides();\n    this.createInfrastructure();\n    this.slideRendering();\n    this.resizePluginContainer();\n\n    if (this.pluginOptions.autostart) {\n      this.start();\n    }\n  },\n\n  start: function() {\n    var self = this;\n    this.timerId = setInterval(function() {\n        self.next();\n      },\n      this.pluginOptions.timeout);\n  },\n\n  stop: function() {\n    clearInterval(this.timerId);\n    this.timerId = undefined;\n  },\n\n  next: function() {\n    if (this.timerId !== undefined) {\n      this.stop();\n    }\n\n    var currentSlide = this.$slides[this.currentSlideIndex];\n    this.indexing();\n    var nextSlide = this.$slides[this.currentSlideIndex];\n\n    currentSlide.animateHide();\n    nextSlide.animateShow();\n    this.resizePluginContainer();\n\n    this.start();\n  },\n\n  createOptions: function(options) {\n    var defaultOptions = this.getDefaultOptions();\n    this.pluginOptions = $.extend(defaultOptions, options);\n  },\n\n  getDefaultOptions: function() {\n    var defaultOptions = {\n      timeout: 7000,\n      autostart: true\n    };\n    return defaultOptions;\n  },\n\n  slideRendering: function() {\n    for (var i = 0; i < this.$slides.length; i++) {\n      var $slide = this.$slides[i];\n      if (i !== 0) {\n        $slide.hideSlide();\n      }\n      this.$slidesWrapper.append($slide.getDomNode());\n    }\n  },\n\n  parseDomTree: function() {\n    var $nodeArr = this.$container.children();\n    $nodeArr.remove();\n\n    var parser = new Parser($nodeArr);\n    this.dataArr = parser.parse();\n  },\n\n  createSlides: function() {\n    for (var i = 0; i < this.dataArr.length; i++) {\n      var data = this.dataArr[i];\n      var $slide = new TestimonialSlide(data);\n      this.$slides.push($slide);\n    }\n  },\n\n  createInfrastructure: function() {\n    this.$slidesWrapper = $('<div />', {\n      'class': 'main_container'\n    });\n    this.$container.append(this.$slidesWrapper);\n    this.createButtonNext();\n  },\n\n  createButtonNext: function() {\n    var $buttonNext = $('<div />', {\n      'class': 'next_slide'\n    });\n    $buttonNext.click(function() {\n      testimonial.next();\n    });\n    this.$container.append($buttonNext);\n  },\n\n  resizePluginContainer: function() {\n    var indents = 20;\n    var slideHeight = this.$slides[this.currentSlideIndex].height();\n\n    this.$container.height(slideHeight + indents);\n  },\n\n  indexing: function() {\n    if (this.$slides.length === 0) {\n      this.currentSlideIndex = 0;\n      return;\n    }\n\n    this.currentSlideIndex++;\n    if (this.currentSlideIndex === this.$slides.length) {\n      this.currentSlideIndex = 0;\n    }\n  }\n};\n","TestimonialSlide = function(data) {\n  this.data = this.createData(data);\n\n  this.createOptions();\n  this.createSlide();\n};\n\nTestimonialSlide.prototype = {\n  createData: function(data) {\n    var emptydata = {\n      authorHref: '',\n      company: '',\n      companyHref: '',\n      fotoSrc: '',\n      fullName: '',\n      quote: ''\n    };\n    var resultData = $.extend(emptydata, data);\n    return resultData;\n  },\n\n  createOptions: function() {\n    this.options = {\n      duration: 750,\n      distance: 250,\n      cssClass: 'testimonial_slide'\n    };\n  },\n\n  createSlide: function() {\n    this.createStandardDomNode();\n    this.$domNode.append(this.createQuoteNode());\n    this.$domNode.append(this.createImgAuthorFoto());\n  },\n\n  createStandardDomNode: function() {\n    this.$domNode = $('<div />', {\n      'class': this.options.cssClass\n    });\n  },\n\n  createQuoteNode: function() {\n    var $quoteNode = $('<div />', {\n      'class': 'quote'\n    });\n\n    $quoteNode.append(this.createQuotationMark());\n    $quoteNode.append(this.createTextNode());\n    $quoteNode.append(this.createQuotationMarkInverted());\n    $quoteNode.append(this.createSignatureNode());\n    return $quoteNode;\n  },\n\n  createTextNode: function() {\n    var $text = $('<div />', {\n      'class': 'text'\n    });\n    $text.text(this.data.quote);\n    return $text;\n  },\n\n  createQuotationMark: function() {\n    var $quotationMark = $('<div />', {\n      'class': 'quotation_mark'\n    });\n    return $quotationMark;\n  },\n\n  createQuotationMarkInverted: function() {\n    var $quotationMarkInverted = $('<div />', {\n      'class': 'quotation_mark_inverted'\n    });\n    return $quotationMarkInverted;\n  },\n\n  createSignatureNode: function() {\n    var $signatureNode = $('<div />', {\n      'class': 'signature'\n    });\n    $signatureNode.append(this.createAuthorNode());\n    $signatureNode.append(this.createCompanyNode());\n    return $signatureNode;\n  },\n\n  createAuthorNode: function() {\n    var $authorNode = $('<div />', {\n      'class': 'author'\n    });\n    $authorNode.text('- ');\n    $authorNode.append(this.createLinkNode(this.data.authorHref, this.data.fullName));\n    return $authorNode;\n  },\n\n  createCompanyNode: function() {\n    var $companyNode = $('<div />', {\n      'class': 'company'\n    });\n    $companyNode.append(this.createLinkNode(this.data.companyHref, this.data.company));\n    return $companyNode;\n  },\n\n  createLinkNode: function(href, text) {\n    var $linkNode = $('<a />', {\n      target: '_blank',\n      href: href,\n      text: text\n    });\n    return $linkNode;\n  },\n\n  createImgAuthorFoto: function() {\n    var $authorFoto = $('<img />', {\n      'class': 'author_foto',\n      'src': this.data.fotoSrc\n    });\n    return $authorFoto;\n  },\n\n  animateHide: function() {\n    var self = this;\n\n    this.$domNode.animate({\n        'margin-left': '+=' + this.options.distance + 'px',\n        opacity: '0'\n      },\n      this.options.duration,\n      function() {\n        self.hideSlide();\n      }\n    );\n  },\n\n  animateShow: function() {\n    this.$domNode.show().animate({\n        'margin-left': '+=' + this.options.distance + 'px',\n        opacity: '1'\n      },\n      this.options.duration * 2);\n  },\n\n  hideSlide: function() {\n    var css = {\n      display: 'none',\n      opacity: 0,\n      'margin-left': '-' + this.options.distance + 'px'\n    };\n    this.$domNode.css(css);\n  },\n\n  height: function() {\n    return this.$domNode.height();\n  },\n\n  getDomNode: function() {\n    return this.$domNode;\n  }\n};\n"],"sourceRoot":"/source/"}