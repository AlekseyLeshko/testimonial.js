{"version":3,"sources":["parser.js","testimonial.js","testimonialSlide.js"],"names":["Parser","$nodeArr","this","dataArr","prototype","parse","i","length","$node","$","parseNode","data","parseAuthorNode","children","quote","text","trim","push","$authorNode","$fullNameNode","$companyNode","slide","fullName","authorHref","getAttrHrefOrDefault","company","companyHref","fotoSrc","attr","href","undefined","Testimonial","$container","options","pluginOptions","$slides","currentSlideIndex","initPlugin","createOptions","parseDomTree","createSlides","createInfrastructure","slideRendering","resizePluginContainer","autostart","start","self","timerId","setInterval","next","timeout","stop","clearInterval","currentSlide","indexing","nextSlide","animateHide","animateShow","defaultOptions","getDefaultOptions","extend","$slide","hideSlide","$slidesWrapper","append","getDomNode","remove","parser","TestimonialSlide","class","createButtonNext","$buttonNext","click","testimonial","indents","slideHeight","height","createData","createSlide","emptydata","resultData","duration","distance","cssClass","createStandardDomNode","$domNode","createQuoteNode","createImgAuthorFoto","$quoteNode","createQuotationMark","createTextNode","createQuotationMarkInverted","createSignatureNode","$text","$quotationMark","$quotationMarkInverted","$signatureNode","createAuthorNode","createCompanyNode","createLinkNode","$linkNode","target","$authorFoto","src","animate","margin-left","opacity","show","css","display"],"mappings":"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","file":"testimonial.min.js","sourcesContent":["Parser = function($nodeArr) {\n  this.$nodeArr = $nodeArr;\n  this.dataArr = [];\n};\n\nParser.prototype = {\n  parse: function() {\n    for (var i = 0; i < this.$nodeArr.length; i++) {\n      var $node = $(this.$nodeArr[i]);\n      this.parseNode($node);\n    }\n\n    return this.dataArr;\n  },\n\n  parseNode: function($node) {\n    var data = this.parseAuthorNode($node.children('.author'));\n    data.quote = $node.children('.quote').text().trim();\n    this.dataArr.push(data);\n  },\n\n  parseAuthorNode: function($authorNode) {\n    var $fullNameNode = $authorNode.children('.full_name');\n    var $companyNode = $authorNode.children('.company');\n    var slide = {\n      fullName: $fullNameNode.text().trim(),\n      authorHref: this.getAttrHrefOrDefault($fullNameNode.children('a')),\n      company: $companyNode.text().trim(),\n      companyHref: this.getAttrHrefOrDefault($companyNode.children('a')),\n      fotoSrc: $authorNode.children('.foto').attr('src')\n    };\n    return slide;\n  },\n\n  getAttrHrefOrDefault: function($node) {\n    var href = $node.attr('href');\n    if (href === undefined) {\n      href = '#';\n    }\n    return href;\n  },\n};\n","Testimonial = function($container, options) {\n  this.$container = $container;\n  this.pluginOptions = {};\n\n  this.$slides = [];\n  this.dataArr = [];\n  this.currentSlideIndex = 0;\n\n  this.initPlugin(options);\n};\n\nTestimonial.prototype = {\n  initPlugin: function(options) {\n    this.createOptions(options);\n    this.parseDomTree();\n    this.createSlides();\n    this.createInfrastructure();\n    this.slideRendering();\n    this.resizePluginContainer();\n\n    if (this.pluginOptions.autostart) {\n      this.start();\n    }\n  },\n\n  start: function() {\n    var self = this;\n    this.timerId = setInterval(function() {\n        self.next();\n      },\n      this.pluginOptions.timeout);\n  },\n\n  stop: function() {\n    clearInterval(this.timerId);\n    this.timerId = undefined;\n  },\n\n  next: function() {\n    if (this.timerId !== undefined) {\n      this.stop();\n    }\n\n    var currentSlide = this.$slides[this.currentSlideIndex];\n    this.indexing();\n    var nextSlide = this.$slides[this.currentSlideIndex];\n\n    currentSlide.animateHide();\n    nextSlide.animateShow();\n    this.resizePluginContainer();\n\n    this.start();\n  },\n\n  createOptions: function(options) {\n    var defaultOptions = this.getDefaultOptions();\n    this.pluginOptions = $.extend(defaultOptions, options);\n  },\n\n  getDefaultOptions: function() {\n    var defaultOptions = {\n      timeout: 7000,\n      autostart: true\n    };\n    return defaultOptions;\n  },\n\n  slideRendering: function() {\n    for (var i = 0; i < this.$slides.length; i++) {\n      var $slide = this.$slides[i];\n      if (i !== 0) {\n        $slide.hideSlide();\n      }\n      this.$slidesWrapper.append($slide.getDomNode());\n    }\n  },\n\n  parseDomTree: function() {\n    var $nodeArr = this.$container.children();\n    $nodeArr.remove();\n\n    var parser = new Parser($nodeArr);\n    this.dataArr = parser.parse();\n  },\n\n  createSlides: function() {\n    for (var i = 0; i < this.dataArr.length; i++) {\n      var data = this.dataArr[i];\n      var $slide = new TestimonialSlide(data);\n      this.$slides.push($slide);\n    }\n  },\n\n  createInfrastructure: function() {\n    this.$slidesWrapper = $('<div />', {\n      'class': 'main_container'\n    });\n    this.$container.append(this.$slidesWrapper);\n    this.createButtonNext();\n  },\n\n  createButtonNext: function() {\n    var $buttonNext = $('<div />', {\n      'class': 'next_slide'\n    });\n    $buttonNext.click(function() {\n      testimonial.next();\n    });\n    this.$container.append($buttonNext);\n  },\n\n  resizePluginContainer: function() {\n    var indents = 20;\n    var slideHeight = this.$slides[this.currentSlideIndex].height();\n\n    this.$container.height(slideHeight + indents);\n  },\n\n  indexing: function() {\n    if (this.$slides.length === 0) {\n      this.currentSlideIndex = 0;\n      return;\n    }\n\n    this.currentSlideIndex++;\n    if (this.currentSlideIndex === this.$slides.length) {\n      this.currentSlideIndex = 0;\n    }\n  }\n};\n","TestimonialSlide = function(data) {\n  this.data = this.createData(data);\n\n  this.createOptions();\n  this.createSlide();\n};\n\nTestimonialSlide.prototype = {\n  createData: function(data) {\n    var emptydata = {\n      authorHref: '',\n      company: '',\n      companyHref: '',\n      fotoSrc: '',\n      fullName: '',\n      quote: ''\n    };\n    var resultData = $.extend(emptydata, data);\n    return resultData;\n  },\n\n  createOptions: function() {\n    this.options = {\n      duration: 750,\n      distance: 250,\n      cssClass: 'testimonial_slide'\n    };\n  },\n\n  createSlide: function() {\n    this.createStandardDomNode();\n    this.$domNode.append(this.createQuoteNode());\n    this.$domNode.append(this.createImgAuthorFoto());\n  },\n\n  createStandardDomNode: function() {\n    this.$domNode = $('<div />', {\n      'class': this.options.cssClass\n    });\n  },\n\n  createQuoteNode: function() {\n    var $quoteNode = $('<div />', {\n      'class': 'quote'\n    });\n\n    $quoteNode.append(this.createQuotationMark());\n    $quoteNode.append(this.createTextNode());\n    $quoteNode.append(this.createQuotationMarkInverted());\n    $quoteNode.append(this.createSignatureNode());\n    return $quoteNode;\n  },\n\n  createTextNode: function() {\n    var $text = $('<div />', {\n      'class': 'text'\n    });\n    $text.text(this.data.quote);\n    return $text;\n  },\n\n  createQuotationMark: function() {\n    var $quotationMark = $('<div />', {\n      'class': 'quotation_mark'\n    });\n    return $quotationMark;\n  },\n\n  createQuotationMarkInverted: function() {\n    var $quotationMarkInverted = $('<div />', {\n      'class': 'quotation_mark_inverted'\n    });\n    return $quotationMarkInverted;\n  },\n\n  createSignatureNode: function() {\n    var $signatureNode = $('<div />', {\n      'class': 'signature'\n    });\n    $signatureNode.append(this.createAuthorNode());\n    $signatureNode.append(this.createCompanyNode());\n    return $signatureNode;\n  },\n\n  createAuthorNode: function() {\n    var $authorNode = $('<div />', {\n      'class': 'author'\n    });\n    $authorNode.text('- ');\n    $authorNode.append(this.createLinkNode(this.data.authorHref, this.data.fullName));\n    return $authorNode;\n  },\n\n  createCompanyNode: function() {\n    var $companyNode = $('<div />', {\n      'class': 'company'\n    });\n    $companyNode.append(this.createLinkNode(this.data.companyHref, this.data.company));\n    return $companyNode;\n  },\n\n  createLinkNode: function(href, text) {\n    var $linkNode = $('<a />', {\n      target: '_blank',\n      href: href,\n      text: text\n    });\n    return $linkNode;\n  },\n\n  createImgAuthorFoto: function() {\n    var $authorFoto = $('<img />', {\n      'class': 'author_foto',\n      'src': this.data.fotoSrc\n    });\n    return $authorFoto;\n  },\n\n  animateHide: function() {\n    var self = this;\n\n    this.$domNode.animate({\n        'margin-left': '+=' + this.options.distance + 'px',\n        opacity: '0'\n      },\n      this.options.duration,\n      function() {\n        self.hideSlide();\n      }\n    );\n  },\n\n  animateShow: function() {\n    this.$domNode.show().animate({\n        'margin-left': '+=' + this.options.distance + 'px',\n        opacity: '1'\n      },\n      this.options.duration * 2);\n  },\n\n  hideSlide: function() {\n    var css = {\n      display: 'none',\n      opacity: 0,\n      'margin-left': '-' + this.options.distance + 'px'\n    };\n    this.$domNode.css(css);\n  },\n\n  height: function() {\n    return this.$domNode.height();\n  },\n\n  getDomNode: function() {\n    return this.$domNode;\n  }\n};\n"],"sourceRoot":"/source/"}