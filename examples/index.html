<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Example plugin Testimonial.js</title>
  <link rel="stylesheet" href="../dist/css/testimonial.min.css">
  <script src="../dist/js/testimonial.min.map.js"></script>
  <script src="../node_modules/jquery/dist/jquery.min.js"></script>
  <script src="../node_modules/jsonlint/lib/jsonlint.js"></script>
</head>

<body>
  <textarea id="json_input" name="json_input" class="json_input" rows="20" cols="100" spellcheck="false" placeholder="Enter JSON" wrap="off"></textarea>
  <br/>
  <input type="button" value="Add slide" onclick="addSlide();">

  <div class="main-container">
    <div class="testimonial_slider">
      <div class="slide">
        <div class="quote">
          The plugin is written using js and css. Uses the library jquery. Plugin is run, there are tests and generally very good plugin!
        </div>
        <div class="author">
          <div class="full_name">
            <a href="https://github.com/AlekseyLeshko">
              Aleksey Leshko
            </a>
          </div>
          <div class="company">
            <a href="https://github.com/AlekseyLeshko">
              Company
            </a>
          </div>
          <img class="foto" src="http://2.gravatar.com/avatar/027ed55733da6f7037335e0af0c46591?s=146">
        </div>
      </div>
      <div class="slide">
        <div class="quote">
          Есть два главных человеческих греха, из которых вытекают все прочие: нетерпение и небрежность. Из-за нетерпения люди изгнаны из рая, из-за небрежности они не возвращаются туда. А может быть, есть только один главный грех: нетерпение. Из-за нетерпения изгнаны, из-за нетерпения не возвращаются.
        </div>
        <div class="author">
          <div class="full_name">
            <a href="#">
              Кафка Франц
            </a>
          </div>
          <div class="company">
            <a href="#">
              Company
            </a>
          </div>
          <img class="foto" src="./img/author_logo.png">
        </div>
      </div>
      <div class="slide">
        <div class="quote">
          Начиная с определенной точки, возврат уже невозможен. Этой точки надо достичь.
        </div>
        <div class="author">
          <div class="full_name">
            <a href="#">
              Кафка Франц
            </a>
          </div>
          <div class="company">
            <a href="#">
              Company
            </a>
          </div>
          <img class="foto" src="./img/author_logo.png">
        </div>
      </div>
    </div>
    <input type="button" value="start" onclick="testimonial.start();">
    <input type="button" value="stop" onclick="testimonial.stop();">
  </div>
  <script>
    var testimonial;
    $(window).load(function() {
      var $container = $('.testimonial_slider');
      testimonial = new Testimonial($container);

      var slide = getDefaultSlide();
      setJson(slide);
    });

    function getDefaultSlide() {
      var slide = {
        authorHref: 'https://github.com/AlekseyLeshko',
        company: 'Company',
        companyHref: 'https://github.com/AlekseyLeshko',
        fotoSrc: 'http://2.gravatar.com/avatar/027ed55733da6f7037335e0af0c46591?s=146',
        fullName: 'Aleksey Leshko',
        quote: 'The plugin is written using js and css. Uses the library jquery. Plugin is run, there are tests and generally very good plugin!'
      };
      return slide;
    }

    function setJson(slide) {
      var data = JSON.stringify(slide, null, '  ');
      $('textarea#json_input').val(data);
    }

    function addSlide() {
      var $textarea = $('textarea#json_input');
      var data = $textarea.val();
      try {
        var slide = jsonlint.parse(data);
        if (slide) {
          $textarea.css('background-color', '');

          testimonial.add(slide);
          setJson(slide);
        }
      } catch(e) {
        $textarea.css('background-color', '#F00');
      }
    }
  </script>
</body>

</html>
